"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9102],{3539:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>u,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>p});var a=n(4848),r=n(8453),o=n(4660),l=n(1470),i=n(9365);const s={},u=void 0,c={id:"paymentMethods/tokenization",title:"tokenization",description:"Registrar m\xe9todo de pago (tokenizaci\xf3n)",source:"@site/i18n/es/docusaurus-plugin-content-docs/current/paymentMethods/tokenization.mdx",sourceDirName:"paymentMethods",slug:"/paymentMethods/tokenization",permalink:"/es/paymentMethods/tokenization",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Guardar MB WAY",permalink:"/es/paymentMethods/payment-mbway-registration"},next:{title:"Webhooks",permalink:"/es/category/webhooks"}},d={},p=[{value:"Registrar m\xe9todo de pago (tokenizaci\xf3n)",id:"registrar-m\xe9todo-de-pago-tokenizaci\xf3n",level:2},{value:"1. Obtener el UUID del cliente",id:"1-obtener-el-uuid-del-cliente",level:3},{value:"2. Concluir el pago a trav\xe9s de checkout",id:"2-concluir-el-pago-a-trav\xe9s-de-checkout",level:3},{value:"POST /checkouts",id:"post-checkouts",level:4},{value:"3. Consultar m\xe9todos de pago del cliente",id:"3-consultar-m\xe9todos-de-pago-del-cliente",level:3}];function h(e){const t={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"registrar-m\xe9todo-de-pago-tokenizaci\xf3n",children:"Registrar m\xe9todo de pago (tokenizaci\xf3n)"}),"\n",(0,a.jsx)(t.p,{children:"La tokenizaci\xf3n es el proceso por el cual los datos confidenciales de pago de los clientes se almacenan de forma segura mediante la creaci\xf3n de un token.\nPara crear un token, hay que seguir los siguientes pasos:"}),"\n",(0,a.jsxs)(t.ol,{children:["\n",(0,a.jsx)(t.li,{children:"Obtener el UUID del cliente;"}),"\n",(0,a.jsx)(t.li,{children:"Compra a trav\xe9s de checkout usando el id del cliente registrado."}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"1-obtener-el-uuid-del-cliente",children:"1. Obtener el UUID del cliente"}),"\n",(0,a.jsx)(t.p,{children:"El primer paso es obtener el UUID del cliente que desea registrar su m\xe9todo de pago. Esto puede hacerse a trav\xe9s de:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/es/customers/create",children:"Crear cliente"})}),"\n",(0,a.jsx)(t.li,{children:(0,a.jsx)(t.a,{href:"/es/customers/get",children:"Consultar cliente"})}),"\n"]}),"\n",(0,a.jsx)(t.h3,{id:"2-concluir-el-pago-a-trav\xe9s-de-checkout",children:"2. Concluir el pago a trav\xe9s de checkout"}),"\n",(0,a.jsx)(t.p,{children:"Para que el m\xe9todo de pago est\xe9 disponible es necesario concluir un pago con \xe9xito."}),"\n",(0,a.jsx)(t.h4,{id:"post-checkouts",children:"POST /checkouts"}),"\n","\n",(0,a.jsx)("button",{className:"btn-api btn-api--float-right",onClick:()=>(0,o.A)("checkouts","checkouts/post/checkouts"),children:(0,a.jsxs)("span",{children:["Consultar API \xa0\xa0\xa0",">"]})}),"\n","\n",(0,a.jsxs)(l.A,{children:[(0,a.jsx)(i.A,{value:"solicitud",label:"Solicitud",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n\t"payment": {\n\t\t"amount": 100,\n\t\t"recurring": {\n\t\t\t"amountQualifier": "ESTM" // <== Montante v\xe1ri\xe1vel\n\t\t},\n\t\t"customer": {\n\t\t\t"uuid": "e2343605-cf46-43de-b20b-9b7d1c95a9b2" // <== ID do customer registado\n\t\t},\n\t\t"paymentMethod": {\n\t\t\t"code": "CC",\n\t\t\t"details": {\n\t\t\t\t"createRegistration": true // <== Indicar que \xe9 para criar token\n\t\t\t}\n\t\t}\n\t},\n\t"page": {\n\t\t"language": "PT"\n\t}\n}\n'})})}),(0,a.jsx)(i.A,{value:"respuesta",label:"Respuesta",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n\t"apiVersion": "1.0",\n\t"date": "2021-10-20T11:34:48+01:00",\n\t"success": true,\n\t"data": {\n\t\t"id": "Qldt1DlonfiF4HthdiCfB1DRmgM31LzmVrFjU6jk",\n\t\t"createdAt": "2021-10-20 11:34:48",\n\t\t"checkoutUrl": "http://paypay.acin.pt/paypaybeta/checkout/v2/form/Qldt1DlonfiF4HthdiCfB1DRmgM31LzmVrFjU6jk",\n\t\t"paymentId": "42380",\n\t\t"stateDetails": {\n\t\t\t"state": "PaymentReady",\n\t\t\t"timestamp": "2021-10-20T11:34:48+01:00"\n\t\t}\n\t}\n}\n'})})})]}),"\n",(0,a.jsx)(t.h3,{id:"3-consultar-m\xe9todos-de-pago-del-cliente",children:"3. Consultar m\xe9todos de pago del cliente"}),"\n",(0,a.jsx)(t.p,{children:"Una vez realizado el pago con \xe9xito, el m\xe9todo de pago es a\xf1adido a los m\xe9todos de pago del cliente."}),"\n",(0,a.jsxs)(t.blockquote,{children:["\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"GET"})," \u200b/customers\u200b/{uuid}\u200b/paymentMethods"]}),"\n"]}),"\n",(0,a.jsx)("button",{className:"btn-api btn-api--float-right btn-api--move-top",onClick:()=>(0,o.A)("customer-payment-methods","customer-payment-methods/get/customers/{uuid}/paymentMethods"),children:(0,a.jsxs)("span",{children:["Consultar API \xa0\xa0\xa0",">"]})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-json",children:'{\n\t"apiVersion": "1.0",\n\t"date": "2021-09-24T17:57:42+01:00",\n\t"success": true,\n\t"data": [\n\t\t{\n\t\t\t"type": "CC",\n\t\t\t"uuid": "90068f83-7623-4de5-91c7-ac447c504ebf",\n\t\t\t"brand": "VISA",\n\t\t\t"last4Digitis": "0809",\n\t\t\t"holder": "Lu\xeds Gon\xe7alves",\n\t\t\t"expireMonth": "05",\n\t\t\t"expireYear": "2026"\n\t\t},\n\t\t{\n\t\t\t"type": "MW",\n\t\t\t"uuid": "45668f83-7623-4de5-91c7-ac447c504ebf",\n\t\t\t"countryCode": "351",\n\t\t\t"last3Digitis": "263"\n\t\t}\n\t]\n}\n'})})]})}function m(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},9365:(e,t,n)=>{n.d(t,{A:()=>l});n(6540);var a=n(4164);const r={tabItem:"tabItem_Ymn6"};var o=n(4848);function l(e){var t=e.children,n=e.hidden,l=e.className;return(0,o.jsx)("div",{role:"tabpanel",className:(0,a.A)(r.tabItem,l),hidden:n,children:t})}},1470:(e,t,n)=>{n.d(t,{A:()=>y});var a=n(6540),r=n(4164),o=n(3104),l=n(6347),i=n(205),s=n(7485),u=n(1682),c=n(9466);function d(e){var t,n;return null!=(t=null==(n=a.Children.toArray(e).filter((function(e){return"\n"!==e})).map((function(e){if(!e||(0,a.isValidElement)(e)&&((t=e.props)&&"object"==typeof t&&"value"in t))return e;var t;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function p(e){var t=e.values,n=e.children;return(0,a.useMemo)((function(){var e=null!=t?t:function(e){return d(e).map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes,default:t.default}}))}(n);return function(e){var t=(0,u.X)(e,(function(e,t){return e.value===t.value}));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function h(e){var t=e.value;return e.tabValues.some((function(e){return e.value===t}))}function m(e){var t=e.queryString,n=void 0!==t&&t,r=e.groupId,o=(0,l.W6)(),i=function(e){var t=e.queryString,n=void 0!==t&&t,a=e.groupId;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:n,groupId:r});return[(0,s.aZ)(i),(0,a.useCallback)((function(e){if(i){var t=new URLSearchParams(o.location.search);t.set(i,e),o.replace(Object.assign({},o.location,{search:t.toString()}))}}),[i,o])]}function f(e){var t,n,r,o,l=e.defaultValue,s=e.queryString,u=void 0!==s&&s,d=e.groupId,f=p(e),v=(0,a.useState)((function(){return function(e){var t,n=e.defaultValue,a=e.tabValues;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!h({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}var r=null!=(t=a.find((function(e){return e.default})))?t:a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:l,tabValues:f})})),b=v[0],g=v[1],x=m({queryString:u,groupId:d}),j=x[0],k=x[1],y=(t=function(e){return e?"docusaurus.tab."+e:null}({groupId:d}.groupId),n=(0,c.Dv)(t),r=n[0],o=n[1],[r,(0,a.useCallback)((function(e){t&&o.set(e)}),[t,o])]),I=y[0],w=y[1],C=function(){var e=null!=j?j:I;return h({value:e,tabValues:f})?e:null}();return(0,i.A)((function(){C&&g(C)}),[C]),{selectedValue:b,selectValue:(0,a.useCallback)((function(e){if(!h({value:e,tabValues:f}))throw new Error("Can't select invalid tab value="+e);g(e),k(e),w(e)}),[k,w,f]),tabValues:f}}var v=n(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(4848);function x(e){var t=e.className,n=e.block,a=e.selectedValue,l=e.selectValue,i=e.tabValues,s=[],u=(0,o.a_)().blockElementScrollPositionUntilNextRender,c=function(e){var t=e.currentTarget,n=s.indexOf(t),r=i[n].value;r!==a&&(u(t),l(r))},d=function(e){var t,n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":var a,r=s.indexOf(e.currentTarget)+1;n=null!=(a=s[r])?a:s[0];break;case"ArrowLeft":var o,l=s.indexOf(e.currentTarget)-1;n=null!=(o=s[l])?o:s[s.length-1]}null==(t=n)||t.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},t),children:i.map((function(e){var t=e.value,n=e.label,o=e.attributes;return(0,g.jsx)("li",Object.assign({role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:function(e){return s.push(e)},onKeyDown:d,onClick:c},o,{className:(0,r.A)("tabs__item",b.tabItem,null==o?void 0:o.className,{"tabs__item--active":a===t}),children:null!=n?n:t}),t)}))})}function j(e){var t=e.lazy,n=e.children,r=e.selectedValue,o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){var l=o.find((function(e){return e.props.value===r}));return l?(0,a.cloneElement)(l,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:o.map((function(e,t){return(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==r})}))})}function k(e){var t=f(e);return(0,g.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,g.jsx)(x,Object.assign({},t,e)),(0,g.jsx)(j,Object.assign({},t,e))]})}function y(e){var t=(0,v.A)();return(0,g.jsx)(k,Object.assign({},e,{children:d(e.children)}),String(t))}},4660:(e,t,n)=>{n.d(t,{A:()=>r});var a=n(6321);const r=function(e,t){void 0===t&&(t=null);var n=document.getElementById("iframePanel"),r=n.contentDocument.querySelectorAll("li.sidebar-group-item ul");r.length>0&&r.forEach((function(e){return e.parentNode.querySelector("button").click()})),window.setTimeout((function(){n.contentDocument.getElementById("sidebar-tag/"+e).querySelector("button").click()}),700),n.contentWindow.location.hash="#tag/"+e,window.setTimeout((function(){n.contentDocument.getElementById("sidebar-tag/"+t).querySelector("a.sidebar-heading-link").click()}),1e3),n.contentWindow.location.hash="#tag/"+t,(0,a.A)()}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>i});var a=n(6540);const r={},o=a.createContext(r);function l(e){const t=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),a.createElement(o.Provider,{value:t},e.children)}}}]);